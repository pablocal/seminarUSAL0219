<!DOCTYPE html>
<html>
  <head>
    <title>Cocina electoral</title>
    <meta charset="utf-8">
    <meta name="author" content="Pablo Cabrera Álvarez |        @pablocalv  Universidad de Salamanca" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Cocina electoral
## Encuestas en tiempos de incertidumbre
### </br>Pablo Cabrera Álvarez |        <span class="citation">@pablocalv</span> </br> </br>Universidad de Salamanca
### 28 feb. 2019

---




class: inverse, center, middle

# Problema

---
# Reino Unido, 2015

--
![](pics/gif1.gif)

---
# España, 2016

--

![](pics/gif2.gif)

---

# Y no son casos únicos...

--

.pull-left[
- Estados Unidos 1948
]

.pull-right[
- Francia 2002
]


---
# Y no son casos únicos...

.pull-left[
- Estados Unidos 1948&lt;/br&gt;
&lt;/br&gt; 
- Estados Unidos 1992&lt;/br&gt;
&lt;/br&gt;
- Virginia 1989&lt;/br&gt;
&lt;/br&gt;
- Reino Unido 1970&lt;/br&gt;
&lt;/br&gt;
- Reino Unido 1992&lt;/br&gt;
&lt;/br&gt;
- Reino Unido 2015&lt;/br&gt;
&lt;/br&gt;
- Nicaragua 1990&lt;/br&gt;
&lt;/br&gt;
- Hungría 2002&lt;/br&gt;
]

.pull-right[
- Francia 2002&lt;/br&gt;
&lt;/br&gt;
- Francia 2007&lt;/br&gt;
&lt;/br&gt;
- Francia 1997&lt;/br&gt;
&lt;/br&gt;
- Quebec 1998&lt;/br&gt;
&lt;/br&gt;
- España 1993&lt;/br&gt;
&lt;/br&gt;
- España 1996 &lt;/br&gt;
&lt;/br&gt;
- España 2016 &lt;/br&gt;
&lt;/br&gt;
- Italia 2006
]

---

# ¿Qué puede fallar en una estimación de voto?

- Problemas de **medición**

  + Reporte erróneo deliberado (Bodor, 2012)

  + Cambio de opinión de los votantes (Durand *et al.*, 2002; MRS, 1994)

  + Modo de administración (Abramson, 2007; Callegaro y Gasperoni, 2008)
  
--

- Problemas de **representatividad**

  + Voto por correo y votantes en el extranjero

  + Estimación de la participación (Abrams, 1970; Callegaro y Gasperoni, 2008)

  + No respuesta y sesgo de autoselección (Jowell *et al.*, 1993; Durand *et al.*, 2002; Callegaro y Gasperoni, 2008; Sturgis *et al.*, 2016)
--

- Efecto **rebaño**

---

# La vida de un *pollster* en la cocina

--
.center[
![](https://media.giphy.com/media/3o6Zt8HWzhklRk36xy/giphy.gif)
]


---
class: inverse, center, middle

# Preguntas

---
background-image: url(pics/pic15.png)
background-position: 50% 50% 
background-size: 95% 
# Población

--

.pull-left[
Población de cinco  &lt;/br&gt; **hombres** y cinco **mujeres** &lt;/br&gt; (censo)
]

--

.pull-right[
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Investigar su **intención de &lt;/br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;voto**
]


---
background-image: url(pics/pic16.png)
background-position: 50% 50% 
background-size: 95% 
# Población

--
.pull-left[
Población (censo): &lt;/br&gt;
&lt;/br&gt;
 5 (50%) **Mujeres** &lt;/br&gt;
 5 (50%) **Hombres**
]

--

.pull-right[
&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Población (modo Dios): &lt;/br&gt; &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;5 (50%) **Partido A**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5 (50%) **Partido B**
]

---
background-image: url(pics/pic17.png)
background-position: 50% 50% 
background-size: 95% 
# No respuesta total

--
.pull-left[
Muestra: &lt;/br&gt;
&lt;/br&gt;
 2 (29%) **Mujeres** &lt;/br&gt;
 5 (71%) **Hombres**
]

--
.pull-right[
&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Muestra: &lt;/br&gt; &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2 (29%) **Partido A**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5 (71%) **Partido B**
]


---
background-image: url(pics/pic17.png)
background-position: 50% 50% 
background-size: 95% 
# Ponderación de no respuesta

--
.pull-left[
&lt;/br&gt; &lt;/br&gt;
Ponderación como: &lt;/br&gt; &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(w_k = \frac{N_k}{n_k}\)`

Para las **mujeres**: &lt;/br&gt; &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(w_m = \frac{5}{2} = 2.5\)`

Para los **hombres**: &lt;/br&gt; &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; `\(w_h = \frac{5}{5} = 1.0\)`
]

--

.pull-right[
&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Estimar voto con &lt;/br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; **ponderaciones**: 
&lt;/br&gt; &lt;/br&gt;

&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**M - A**: `\(2*2.5 = 5\)` (50%)  &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**H - B**: `\(5*1.0 = 5\)` (50%)   &lt;/br&gt;
]

---
# Ponderación de no respuesta


  * **Ajuste estadístico** que permite compensar las diferencias en las probabilidades de respuesta de diferentes subgrupos (Särndal, 2007)

--

  * **Variables auxiliares** disponibles para los que responden y los que no responden, o al menos los totales poblacionales (*por ej.* sexo, edad, voto en anteriores elecciones...)

--

  * **Variables auxiliares**  que estén correlacionadas con la **probabilidad de responder** y la **variable de interés** (*por ej.* intención de voto)

--

* La **distribución de la variable de interés** dentro de los subgrupos de las variables auxiliares debe ser similar a la distribución en la población (Sturgis *et al.*, 2016)

--

* En estudios para estimar voto uso recurrente de la variable **recuerdo de voto**. Debate sobre su uso (Crespi, 1988; Voss *et al.*, 1995; Durand *et al.*, 2015; Crewe, 2001; Escobar *et al.*, 2014)

---
# Problemas del recuerdo de voto

![](slides_files/figure-html/unnamed-chunk-1-1.png)&lt;!-- --&gt;




---
background-image: url(pics/pic18.png)
background-position: 50% 50% 
background-size: 95% 
# No respuesta parcial

--

.pull-left[
Dos entrevistados &lt;/br&gt;
rechazaron revelar &lt;/br&gt;
su **intención de voto**
&lt;/br&gt;
]

--
&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;&lt;/br&gt; &lt;/br&gt;
.pull-right[
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Usar otra información &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;de la encuesta para &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; **imputar**
&lt;/br&gt;
]

---

# No respuesta parcial


![](slides_files/figure-html/unnamed-chunk-2-1.png)&lt;!-- --&gt;

---
# Imputación

* Diversidad de **métodos de imputación**: imputación de la media/moda, *hot-deck*, imputación condicional, imputación múltiple

--

* Posibilidad de utilizar otras variables del cuestionario para **informar la imputación** (*por ej.* imputación condicional, *hot-deck*)

--

* La **imputación múltiple** consiste en generar `\(m\)` bases de datos completas con lo que se añade a la varianza un componente derivado de la incertidumbre debida a los datos perdidos (Rivero, 2011)

--

* La imputación de la **intención de voto** llevada a cabo con técnicas *ad hoc* según la casa de encuestas (Crespi, 1988; Sturgis *et al.*, 2016)

--

* Algunos intentos de utilizar imputación múltiple en el ámbito electoral desde la academia (*por ej.*  Bernhagen y Marsh, 2007; Escobar y Jaime, 2013; Liu, 2014)

---


# Hipótesis

--

* **H1**:  La **ponderación** de la muestra por **recuerdo de voto** contribuye a incrementar la precisión de la estimación de voto

--


* **H2**: El uso de la **ponderación** que combina las variables **sociodemográficas** y el **recuerdo de voto** será el más efectivo para reducir el nivel de error de la estimación de voto 

--

* **H3**:  El uso de técnicas de **imputación múltiple** para tratar la variable **recuerdo de voto** reduce el nivel de sesgo presente en esta variable y, en consecuencia, su uso en la ponderación incrementa la precisión de la estimación de voto

--

* **H4**:  El uso de técnicas de **imputación múltiple** para asignar una **intención de voto** a aquellos que no saben o no contestan incrementa la precisión de la estimación de voto

--

* **H5**: El uso de la variable **recuerdo de voto** para ponderar tiene un efecto positivo en la precisión de las estimaciones en las **elecciones en las que hay continuidad política**, también después de 2015

---
# Datos y métodos

* **Datos** de encuestas **preelectorales y postelectorales del CIS** para las elecciones 1982-2016

--

* **Ponderaciones** generadas usando **calibración logística**


* **Imputación múltiple** utilizando un sistema  **ecuaciones encadenadas** y **univariada**

--

* Estimaciones evaluadas utilizando el **error medio absoluto ponderado** (EMAP) con respecto a los resultados electorales:

$$ EMAP =  \sum_{k=1}^{k} |\hat{p}_k - p_k|p_k $$
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; donde `\(\hat{p}_k\)` es la estimación de voto para el partido `\(k\)` y `\(p_k\)` su resultado en &lt;/br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;las elecciones

* EMAP de cada estimación y recuerdo de voto imputado modelado usando regresión lineal (MCO) 

---
# Métodos: ponderación

|    Nombre    |    Variables de ponderación                  |    RV imputado    |    Ámbito del RV               |
|-------------|----------------------------------------------|-------------------|-----------------------------------|
|    **EB**       |    Provincia                                 |                   |                                   |
|    **SD**       |    Provincia y sociodemográficas (SD)        |                   |                                   |
|    **RV0**      |    Provincia y recuerdo de voto (RV)        |    No             |    NR, NV y NVJ excluidos    |
|    **RV1**      |    Provincia y RV             |    No             |    NR, NV y NVJ incluidos     |
|    **RV2**      |    Provincia y RV             |    Sí (NR imputado)            |    NR, NV y NVJ incluidos      |
|    **RV3**      |    Provincia y RV             |    Sí (NR y NVJ imputado)             |    NR, NV y NVJ incluidos     |
|    **SD+RV**    |    Provincia, SD y RV    |    Sí (NR y NVJ imputado)             |    NR, NV y NVJ incluidos     |

---
# Métodos: imputación múltiple


* **Recuerdo de voto**: 

|    Nombre                  |    Variable objetivo   (modelo)      |    Predictores    |
|-------------------------------|--------------------------------------|-------------------------------|
|    **RV1 sin imputar**            |                                      |                               |
|    **RV2 imputado (NR)**          |    Recuerdo de voto (multinomial)    |    Conjunto mixto             |
|    **RV3 imputado (NR y NVJ)**    |    Recuerdo de voto (multinomial)    |    Conjunto mixto             |

**Conjunto mixto**: Sexo, edad, tamaño de hábitat, comunidad autónoma, intención de voto e ideología

---
# Métodos: imputación múltiple

* **Intención de voto**: 

|    Nombre                      |    Variable objetivo   (modelo)                                                              |    Predictores     |
|--------------------------------|----------------------------------------------------------------------------------------------|--------------------------------|
|   **No imputada (EB)**              |                                                                                              |                                |
|    **Univariada básica**        |    Intención de voto (multinomial)                                                           |    Conjunto básico        |
|    **Univariada   ampliada**    |    Intención de voto (multinomial)                                                           |    Conjunto ampliado   |
|    **Encadenada básica**        |    Intención de voto (multinomial)   Recuerdo de voto (multinomial)   Ideología (ordinal)    |    Conjunto básico        |
|    **Encadenada   ampliada**    |    Intención de voto (multinomial)   Recuerdo de voto (multinomial)   Ideología (ordinal)    |    Conjunto ampliado    |

**Conjunto básico**: Sexo, edad, nivel educativo, recuerdo de voto e ideología
**Conjunto ampliado**: Sexo, edad, nivel educativo, recuerdo de voto, ideología, evaluación de la situación económica y evaluación de la situación política
---
class: inverse, middle, center

# Indicios

---

# ¿Imputar el recuerdo de voto?

.center[
![](pics/plot1.png)
]

---

# ¿Ponderar por el recuerdo de voto?

.center[
![](pics/plot2.png)
]


---

# ¿Ponderar por el recuerdo de voto? (SD)

.center[
![](pics/plot4.png)
]



---

# ¿Ponderar por el recuerdo de voto?

.center[
![](pics/plot2.png)
]






---

# ¿Ponderar por el recuerdo de voto? (RV3)

.center[
![](pics/plot5.png)
]



---
# ¿Imputar la intención de voto?

.center[
![](pics/plot3.png)
]

---
class: center, middle, inverse

# Final

---

# Conclusiones

--
&lt;/br&gt;

* Uso de la ponderación por recuerdo de voto (**H1**) mejora la precisión de las estimaciones aunque añadir las variables sociodemográficas (**H2**) no aporta un incremento en la precisión  

--

* Usar la imputación múltiple para corregir la variable recuerdo de voto (**H3**) no repercute en el nivel de ajuste de la propia variable y tampoco en la precisión de la estimación

--

* El uso de la imputación múltiple para tratar los casos perdidos de la variable de intención de voto (**H4**) apenas afecta a la precisión de las estimaciones

--

* El momento del ciclo político, según se trate de elecciones de continuidad o de cambio (**H5**), sigue estando relacionado con la capacidad de la ponderación de mejorar la estimación de voto tras los cambios en el sistema de partidos

---
class: inverse, middle, center

## Gracias

#### pablocal@usal.es | @pablocalv &lt;/br&gt;

&lt;/br&gt;
&lt;/br&gt;

Cabrera-Álvarez, Pablo y Escobar, Modesto (2019). «El efecto de la ponderación y la imputación en
el sesgo de los estudios electorales en España». Revista Española de Investigaciones Sociológicas,
165: 45-64. 

&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;

Esta investigación cuenta con el apoyo del programa de becas de la Fundación "La Caixa" LCF/BQ/ES16/11570005

---


![](slides_files/figure-html/unnamed-chunk-3-1.png)&lt;!-- --&gt;

---
# Recuerdo voto CIS


.center[
![](pics/pic19.png)
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
